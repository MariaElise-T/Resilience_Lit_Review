This paper proposes a two-stage planning method of distributed generation based on coordinated recovery of load partition to improve the resilience of the power grid in extreme weather. The method includes a scenario generation model and an optimization model. In the first stage, a scenario generation model is established, including the distributed generation output and line failure models, to obtain the power output and line status in different scenarios with different weather. Then, an optimal subnetwork screening robust optimization model is built to screen the optimal subnetworks for the deployment of distributed generation in each scenario. In the second stage, a node location optimization model is developed to obtain the optimal node locations for deploying distributed generation within the subnetwork, aiming at maximizing the recovery efficiency of critical loads. Case studies based on a modified IEEE 30-bus system are used to demonstrate the effectiveness of the proposed method. The findings show that the recovered load and recovery efficiency of the power system can be significantly improved.